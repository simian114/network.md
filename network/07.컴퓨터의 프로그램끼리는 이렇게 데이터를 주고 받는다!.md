# 컴퓨터의 프로그램끼리는 이렇게 데이터를 주고 받는다!?

## 4계층 프로토콜

#### 4계층에서 하는 일

- 전송 계층(Transport layer)은 송신자의 프로세스와 수신자의 프로세스를 연결하는 통신 서비스를 제공한다.
- 전송 계층은 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어, 그리고 다중화와 같은 편리한 서비스를 제공한다.
- 전송 프로토콜 중 가장 잘 알려진 것은 연결 지향 전송 방식을 사용하는 전송 제어 프로토콜(TCP)이다. 보다 단순한 전송에 사용되는 사용자 데이터그램 프로토콜(UDP)도 있다.

#### 4계층 프로토콜의 종류

###### TCP

> ​	안전항 연결을 지향

- 연결을 확인하고 데이터를 보냄. 보내는 와중에도 계속 잘 받았는지 계속 확인함.



###### UDP

> 안전한 연결을 지향하지 않는

- 데이터를 받는지 확인하지 않고 그냥 보낸다.

## 포트 번호

#### 포트번호의 특징

- 특정 프로세스와 특정 프로세스가 통신을 하기 위해 사용한다.
- **<u>*하나의 포트는 하나의 프로세스*</u>**만 사용 가능하다.
- 하나의 프로세스가 여려 개의 포트를 사용하는 것은 가능하다.
- 포트 번호는 일반적으로 정해져 있지만 무조건 지켜야 하는 것은 아니다.

#### Well-Known 포트

> 전 세계적으로 유명한 포트

| 서비스 이름 | 포트 번호 |
| ----------- | --------- |
| FTP         | 20, 21    |
| SSH         | 22        |
| TELNET      | 23        |
| DNS         | 53        |
| DHCP        | 67, 68    |
| TFTP        | 69        |
| HTTP        | 80        |
| HTTPS       | 443       |



#### Registered 포트

> 조금은 유명한 포트

| 서비스 이름      | 포트 번호 |
| ---------------- | --------- |
| 오라클 DB 서버   | 1521      |
| MYSQL 서버       | 3306      |
| MS 원격 데스크탑 | 3389      |



#### Dynamic 포트

> 일반 사용자들이 사용하는 포트

| 시작 포트 번호 | 마지막 포트 번호 |
| -------------- | ---------------- |
| 49152          | 65535            |



## 프로그램의 연결 정보



#### 어떤 프로세스와 어떤 프로세스가 연결되어 있는지 확인	

- `cmd`에 `netstat -ano` 입력



## 실습

#### 현재 연결 상태 확인하기

#### 특정 서비스의 포트번호 확인하기

- 네이버에 접속 후 빠르게 `netstat -ano`을 실행하자.
- 그러면 `IP:443` 이 수두룩하게 등장하는데 이 녀석이 `네이버`일 확률이 높다.
- 이제 네이버와 통신하고 있는 `프로세스`번호를 확인하고 어떤 프로그램인지 알아보자.
- 작업관리자 들어가서 확인한 결과 네이버와 통신하고 있던 프로그램은 `Whale`이었다.